**Wi-Fi** (IEEE 802.11) — это набор стандартов для беспроводных локальных сетей (WLAN), позволяющий устройствам подключаться к сети без использования кабелей. Wi-Fi работает в нелицензированных радиочастотных диапазонах 2.4 ГГц, 5 ГГц и 6 ГГц.

## **Основные характеристики**

| Параметр                    | Описание                                                                 |
| --------------------------- | ------------------------------------------------------------------------ |
| **Стандарт**                | IEEE 802.11 (семейство стандартов)                                       |
| **Частотные диапазоны**     | 2.4 ГГц, 5 ГГц, 6 ГГц                                                    |
| **Максимальная скорость**   | До 9.6 Гбит/с (Wi-Fi 6E)                                                 |
| **Радиус действия**         | 30-100 м в помещении, до 300 м на открытом воздухе                       |
| **Топология**               | Звезда (через точку доступа) или Ad-hoc (точка-точка)                    |
| **Метод доступа**           | CSMA/CA (Carrier Sense Multiple Access with Collision Avoidance)         |
| **Безопасность**            | WEP (устаревший), WPA, WPA2, WPA3                                        |

## **Стандарты Wi-Fi**

| Стандарт      | Год   | Частота      | Макс. скорость | Описание                                    |
| ------------- | ----- | ------------ | -------------- | ------------------------------------------- |
| **802.11**    | 1997  | 2.4 ГГц      | 2 Мбит/с       | Первый стандарт                             |
| **802.11b**   | 1999  | 2.4 ГГц      | 11 Мбит/с      | Популярный стандарт                         |
| **802.11a**   | 1999  | 5 ГГц        | 54 Мбит/с      | Высокая скорость, меньший радиус            |
| **802.11g**   | 2003  | 2.4 ГГц      | 54 Мбит/с      | Обратная совместимость с 802.11b            |
| **802.11n**   | 2009  | 2.4/5 ГГц    | 600 Мбит/с     | MIMO, 40 МГц каналы                         |
| **802.11ac**  | 2013  | 5 ГГц        | 6.77 Гбит/с    | Wi-Fi 5, MU-MIMO, 160 МГц каналы            |
| **802.11ax**  | 2019  | 2.4/5/6 ГГц  | 9.6 Гбит/с     | Wi-Fi 6, OFDMA, улучшенная эффективность    |
| **802.11be**  | 2024  | 2.4/5/6 ГГц  | До 46 Гбит/с   | Wi-Fi 7, 320 МГц каналы, MLD                |

## **Структура кадра Wi-Fi (802.11 Frame)**

| Поле                    | Размер (байты) | Описание                                    | Пример/Значение                    |
| ----------------------- | -------------- | ------------------------------------------- | ---------------------------------- |
| **Frame Control**       | 2              | Управляющая информация (тип, подтип, флаги) | `0x0008` (Data frame)              |
| **Duration/ID**         | 2              | Длительность передачи или ID ассоциации     | Время в микросекундах              |
| **Address 1**            | 6              | MAC-адрес получателя (RA)                   | `00:1A:2B:3C:4D:5E`                |
| **Address 2**            | 6              | MAC-адрес отправителя (TA)                  | `AA:BB:CC:DD:EE:FF`                |
| **Address 3**            | 6              | MAC-адрес BSSID (для инфраструктуры)        | MAC точки доступа                  |
| **Sequence Control**     | 2              | Номер последовательности и фрагмента        | `0x1234`                           |
| **Address 4**            | 6              | MAC-адрес источника (только для Ad-hoc)     | Опционально                        |
| **QoS Control**          | 2              | Приоритет трафика (только для QoS frames)   | Опционально                        |
| **HT Control**           | 4              | Расширенная информация (802.11n+)           | Опционально                        |
| **Frame Body (Payload)** | 0-2312         | Полезная нагрузка (инкапсулированные данные) | IP пакет, данные приложения        |
| **FCS**                  | 4              | Контрольная сумма (CRC32)                   | Рассчитывается на лету             |

### **Frame Control поле (детально)**

| Бит  | Название        | Описание                                    |
| ---- | --------------- | ------------------------------------------- |
| 0-1  | Protocol Version| Версия протокола (обычно 00)                |
| 2-3  | Type            | Тип кадра: 00=Management, 01=Control, 10=Data |
| 4-7  | Subtype         | Подтип кадра (зависит от типа)              |
| 8    | To DS           | Кадр направлен в распределительную систему  |
| 9    | From DS         | Кадр приходит из распределительной системы  |
| 10   | More Fragments  | Есть еще фрагменты                          |
| 11   | Retry           | Повторная передача                          |
| 12   | Power Management| Режим энергосбережения                      |
| 13   | More Data       | Есть еще данные для станции                 |
| 14   | Protected Frame | Кадр зашифрован (WEP/WPA/WPA2)              |
| 15   | Order           | Строгий порядок кадров                      |

## **Типы кадров Wi-Fi**

### **1. Management Frames (Управляющие кадры)**

| Подтип | Название        | Описание                                    |
| ------ | --------------- | ------------------------------------------- |
| 0x00   | Association Request | Запрос на ассоциацию с точкой доступа      |
| 0x01   | Association Response| Ответ на запрос ассоциации                 |
| 0x02   | Reassociation Request| Запрос на переассоциацию                  |
| 0x03   | Reassociation Response| Ответ на переассоциацию                   |
| 0x04   | Probe Request   | Поиск доступных сетей                       |
| 0x05   | Probe Response  | Ответ с информацией о сети                  |
| 0x08   | Beacon          | Периодическая рассылка информации о сети   |
| 0x09   | ATIM            | Announcement Traffic Indication Message     |
| 0x0A   | Disassociation  | Разрыв ассоциации                           |
| 0x0B   | Authentication  | Аутентификация                              |
| 0x0C   | Deauthentication| Отмена аутентификации                       |

### **2. Control Frames (Управляющие кадры)**

| Подтип | Название        | Описание                                    |
| ------ | --------------- | ------------------------------------------- |
| 0x1B   | RTS             | Request To Send (запрос на передачу)        |
| 0x1C   | CTS             | Clear To Send (разрешение на передачу)      |
| 0x1D   | ACK             | Подтверждение получения                     |
| 0x1E   | CF-End          | Конец периода без конкуренции               |
| 0x1F   | CF-End + CF-Ack | Конец периода + подтверждение               |

### **3. Data Frames (Кадры данных)**

| Подтип | Название        | Описание                                    |
| ------ | --------------- | ------------------------------------------- |
| 0x20   | Data            | Обычные данные                              |
| 0x21   | Data + CF-Ack   | Данные + подтверждение                      |
| 0x22   | Data + CF-Poll  | Данные + опрос                               |
| 0x23   | Data + CF-Ack + CF-Poll | Комбинированный кадр              |
| 0x24   | Null            | Пустой кадр (без данных)                    |
| 0x25   | CF-Ack          | Подтверждение без данных                    |
| 0x26   | CF-Poll         | Опрос без данных                            |
| 0x27   | CF-Ack + CF-Poll| Подтверждение + опрос                       |

## **Процесс подключения к Wi-Fi сети**

### **1. Сканирование (Scanning)**

```bash
# Активное сканирование - отправка Probe Request
# Пассивное сканирование - прослушивание Beacon frames
```

**Этапы:**
- Устройство отправляет Probe Request на всех каналах
- Точки доступа отвечают Probe Response с информацией о сети
- Или устройство слушает Beacon frames (пассивное сканирование)

### **2. Аутентификация (Authentication)**

| Тип аутентификации | Описание                                    |
| ------------------ | ------------------------------------------- |
| **Open System**    | Открытая аутентификация (без пароля)        |
| **Shared Key**      | Аутентификация с общим ключом (WEP)         |
| **WPA/WPA2**        | Аутентификация через 4-way handshake       |
| **WPA3**            | Улучшенная аутентификация с SAE             |

**Процесс:**
1. Клиент отправляет Authentication Request
2. Точка доступа отвечает Authentication Response
3. Для WPA/WPA2 выполняется 4-way handshake

### **3. Ассоциация (Association)**

1. Клиент отправляет Association Request с параметрами:
   - Поддерживаемые скорости
   - Типы кадров
   - QoS возможности
2. Точка доступа отвечает Association Response с:
   - ID ассоциации (AID)
   - Подтверждением параметров

### **4. 4-Way Handshake (WPA/WPA2)**

```
1. AP → Client: ANonce (случайное число от AP)
2. Client → AP: SNonce (случайное число от клиента) + MIC
3. AP → Client: GTK (Group Temporal Key) + MIC
4. Client → AP: Подтверждение
```

## **Каналы Wi-Fi**

### **2.4 ГГц диапазон**

| Канал | Центральная частота | Перекрытие с каналами |
| ----- | ------------------- | --------------------- |
| 1     | 2412 МГц            | 1-3                   |
| 6     | 2437 МГц            | 4-8                   |
| 11    | 2462 МГц            | 9-13                  |

**Рекомендации:** Использовать каналы 1, 6, 11 (не перекрываются)

### **5 ГГц диапазон**

| Канал | Центральная частота | Ширина канала |
| ----- | ------------------- | ------------ |
| 36    | 5180 МГц            | 20/40/80 МГц |
| 40    | 5200 МГц            | 20/40/80 МГц |
| 44    | 5220 МГц            | 20/40/80 МГц |
| 48    | 5240 МГц            | 20/40/80 МГц |
| 149   | 5745 МГц            | 20/40/80 МГц |
| 153   | 5765 МГц            | 20/40/80 МГц |
| 157   | 5785 МГц            | 20/40/80 МГц |
| 161   | 5805 МГц            | 20/40/80 МГц |

## **Безопасность Wi-Fi**

### **WEP (Wired Equivalent Privacy) - УСТАРЕВШИЙ**

| Параметр           | Значение                    |
| ------------------ | ---------------------------- |
| **Длина ключа**    | 64/128/256 бит               |
| **Алгоритм**       | RC4                          |
| **IV размер**      | 24 бита                      |
| **Статус**         | Небезопасен, легко взламывается |

### **WPA (Wi-Fi Protected Access)**

| Параметр           | Значение                    |
| ------------------ | ---------------------------- |
| **Алгоритм**       | TKIP (Temporal Key Integrity Protocol) |
| **Аутентификация** | PSK (Pre-Shared Key) или 802.1X |
| **Статус**         | Устаревший, заменен WPA2    |

### **WPA2 (Wi-Fi Protected Access 2)**

| Параметр           | Значение                    |
| ------------------ | ---------------------------- |
| **Алгоритм**       | AES-CCMP (Advanced Encryption Standard) |
| **Аутентификация** | PSK или 802.1X/EAP          |
| **Ключ**           | 256-битный                  |
| **Статус**         | Рекомендуемый стандарт      |

**Типы WPA2:**
- **WPA2-Personal (PSK)**: Использует пароль (8-63 символа)
- **WPA2-Enterprise**: Использует RADIUS сервер для аутентификации

### **WPA3 (Wi-Fi Protected Access 3)**

| Параметр           | Значение                    |
| ------------------ | ---------------------------- |
| **Алгоритм**       | AES-256-GCM                 |
| **Аутентификация** | SAE (Simultaneous Authentication of Equals) |
| **Защита**         | Защита от атак перебора      |
| **Forward Secrecy**| Да                          |
| **Статус**         | Современный стандарт         |

## **Примеры конфигурации**

### **Linux (wpa_supplicant)**

```bash
# Конфигурационный файл /etc/wpa_supplicant/wpa_supplicant.conf
network={
    ssid="MyNetwork"
    psk="MyPassword123"
    key_mgmt=WPA2-PSK
    proto=RSN
    pairwise=CCMP
    group=CCMP
}

# Подключение
sudo wpa_supplicant -B -i wlan0 -c /etc/wpa_supplicant/wpa_supplicant.conf
sudo dhclient wlan0
```

### **Проверка подключения**

```bash
# Список доступных сетей
iwlist wlan0 scan

# Информация о подключении
iwconfig wlan0

# Детальная информация
iw dev wlan0 link

# Мониторинг трафика
sudo tcpdump -i wlan0 -n
```

## **MIMO (Multiple Input Multiple Output)**

| Параметр           | Описание                                    |
| ------------------ | ------------------------------------------- |
| **MIMO**           | Использование нескольких антенн для передачи и приема |
| **SU-MIMO**        | Single-User MIMO (один пользователь)        |
| **MU-MIMO**        | Multi-User MIMO (несколько пользователей)   |
| **Потоки**         | 2x2, 3x3, 4x4 (антенны TX x антенны RX)     |

## **Диагностика и устранение неисправностей**

| Проблема                   | Причина                                  | Решение                                   |
| -------------------------- | ---------------------------------------- | ----------------------------------------- |
| **Низкая скорость**        | Перегрузка канала, помехи                | Сменить канал, использовать 5 ГГц        |
| **Периодические обрывы**   | Слабый сигнал, помехи                    | Улучшить расположение точки доступа      |
| **Не подключается**        | Неверный пароль, несовместимость         | Проверить пароль, обновить драйверы       |
| **Высокая задержка**       | Перегрузка сети, много устройств         | Использовать QoS, обновить оборудование  |

## **Сравнение стандартов**

| Характеристика | 802.11n (Wi-Fi 4) | 802.11ac (Wi-Fi 5) | 802.11ax (Wi-Fi 6) |
| -------------- | ----------------- | ------------------ | ------------------ |
| **Год**        | 2009              | 2013               | 2019               |
| **Частота**    | 2.4/5 ГГц         | 5 ГГц              | 2.4/5/6 ГГц        |
| **Макс. скорость** | 600 Мбит/с    | 6.77 Гбит/с        | 9.6 Гбит/с         |
| **MIMO**       | SU-MIMO           | MU-MIMO            | MU-MIMO улучшенный |
| **Каналы**     | До 40 МГц         | До 160 МГц         | До 160 МГц         |
| **Модуляция**  | 64-QAM            | 256-QAM            | 1024-QAM           |
| **OFDMA**      | Нет               | Нет                | Да                 |
